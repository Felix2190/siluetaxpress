<?php

// -----------------------------------------------------------------------------------------------------------------#
// ---------------------------------------Archivos necesarios Require Include---------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#
require_once FOLDER_MODEL_EXTEND. "model.tipousuario.inc.php";
// -----------------------------------------------------------------------------------------------------------------#
// --------------------------------------------Inicializacion de control--------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// ----------------------------------------------------Funciones----------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// ---------------------------------------------------Seccion AJAX--------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

$xajax = new xajax();


function guardarCargo($ID,$cargo,$abreviatura){
    $r=new xajaxResponse();
    $usuario = new ModeloTipoUsuario();
    $usuario->setIdTipoUsuario($ID);;
    $usuario->setNombre($cargo);
    $usuario->setAbrev($abreviatura);
    
    $usuario->Guardar();
    if ($usuario->getError()){
        $r->call('mostrarMsjError',$usuario->getStrError(),5);
        return $r;
    }
      $r->call('mostrarMsjExito','Se actualizg&oacute; correctamente el tipo!',2);
    $r->redirect('verTipoUsuario.php',3);
    
    return $r;
    
}

$xajax->registerFunction("guardarCargo");

$xajax->processRequest();


// -----------------------------------------------------------------------------------------------------------------#
// -------------------------------------------Inicializacion de variables-------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

if (!isset($_SESSION['verTipoUsuario'])){
    header("Location: listadoTipoUsuarios.php");
}

$aux =$_SESSION['verTipoUsuario'];
$idTipoUsuario=$aux['idTipoUsuario'];

$TipoUsuario = new ModeloTipoUsuario();
$TipoUsuario->setIdTipoUsuario($idTipoUsuario);

if ($TipoUsuario->getIdTipoUsuario()>0){
//    $ = new Modelo();
//    $->setId($->getId());
    
}else {
    header("Location: listadoTipoUsuarios.php");
}

?>