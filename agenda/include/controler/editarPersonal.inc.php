<?php

// -----------------------------------------------------------------------------------------------------------------#
// ---------------------------------------Archivos necesarios Require Include---------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#
require_once FOLDER_MODEL_EXTEND. "model.personal.inc.php";
// -----------------------------------------------------------------------------------------------------------------#
// --------------------------------------------Inicializacion de control--------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// ----------------------------------------------------Funciones----------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// ---------------------------------------------------Seccion AJAX--------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

$xajax = new xajax();


function guardar($idPersonal, $nombre,  $sucursal, $consulta){
    $r=new xajaxResponse();
    $personal = new ModeloPersonal();
    if (intval($idPersonal)>0)
        $personal->setIdPersonal($idPersonal);
    $personal->setNombreCompleto($nombre);
    $personal->setTipoConsulta($consulta);
    $personal->setIdSucursal($sucursal);
    $personal->Guardar();
    if ($personal->getError()){
        $r->call("mostrarMsjError",$personal->getStrError(),6);
        return $r;
    }
    
    $r->call("mostrarMsjExito","Personal registrado correctamente!",5);
    $r->call("limpiar");
    
    return $r;
    
}

$xajax->registerFunction("guardar");

function actualizar($idPersonal, $estatus){
    $r=new xajaxResponse();
    $personal = new ModeloPersonal();
    $personal->setIdPersonal($idPersonal);
    if ($estatus==1) 
        $personal->setActivo();
    else 
        $personal->unsetActivo();
   $personal->Guardar();
   
   $r->call("mostrarMsjExito","Actualizaci&oacute;n correcta!",5);
    
    return $r;
    
}

$xajax->registerFunction("actualizar");

$xajax->processRequest();


// -----------------------------------------------------------------------------------------------------------------#
// -------------------------------------------Inicializacion de variables-------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#
?>