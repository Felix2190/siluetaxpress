<?php

// -----------------------------------------------------------------------------------------------------------------#
// ---------------------------------------Archivos necesarios Require Include---------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#
//require_once FOLDER_MODEL_EXTEND. "model..inc.php";
require_once FOLDER_MODEL_EXTEND . "model.inegidomgeo_cat_estado.inc.php";
require_once FOLDER_MODEL_EXTEND . "model.inegidomgeo_cat_municipio.inc.php";

// -----------------------------------------------------------------------------------------------------------------#
// --------------------------------------------Inicializacion de control--------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// ----------------------------------------------------Funciones----------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

// -----------------------------------------------------------------------------------------------------------------#
// ---------------------------------------------------Seccion AJAX--------------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#

$xajax = new xajax();

function cambioEstado($cveEstado) {
    $r = new xajaxResponse ();
    $municipios = new ModeloInegidomgeo_cat_municipio ();
    $slcMunicipios = '<option value="">Seleccione una opci&oacute;n</option>';
    $arrCiudades = $municipios->getAll ( $cveEstado );
    if ($municipios->getError ()) {
        $r->mostrarError ( $municipios->getError () );
        return $r;
    }
    
        $r->assign ( "slcMunicipio", "innerHTML", $slcMunicipios );
//        $r->ocultarMensaje ();
        return $r;
        
}
$xajax->registerFunction ( "cambioEstado" );


$xajax->registerFunction("");

$xajax->processRequest();


// -----------------------------------------------------------------------------------------------------------------#
// -------------------------------------------Inicializacion de variables-------------------------------------------#
// -----------------------------------------------------------------------------------------------------------------#
$slcMunicipios=$slcEstados = '<option value="">Seleccione una opci&oacute;n</option>';
$etados = new ModeloInegidomgeo_cat_estado();
$arrEst = $etados->getAll();
if (! $etados->getError())
    foreach ($arrEst as $cvEst => $nombre)
        $slcEstados .= '<option value="' . $cvEst . '"  >' . $nombre . '</option>';
        
?>